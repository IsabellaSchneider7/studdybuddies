{"code":"(this[\"webpackJsonpreact-express-starter\"]=this[\"webpackJsonpreact-express-starter\"]||[]).push([[0],{185:function(e,t,n){\"use strict\";n.r(t);var a=n(0),c=n(2),r=n(73),i=n.n(r),o=(n(81),n(82),n(27)),s=n.n(o),d=n(74),l=n(7),j=n(75),b=n.n(j);var u=({username:e,handleUsernameChange:t,roomName:n,handleRoomNameChange:c,handleSubmit:r,connecting:i})=>Object(a.jsxs)(\"form\",{onSubmit:r,children:[Object(a.jsx)(\"h2\",{children:\"Enter a room\"}),Object(a.jsxs)(\"div\",{children:[Object(a.jsx)(\"label\",{htmlFor:\"name\",children:\"Name:\"}),Object(a.jsx)(\"input\",{type:\"text\",id:\"field\",value:e,onChange:t,readOnly:i,required:!0})]}),Object(a.jsxs)(\"div\",{children:[Object(a.jsx)(\"label\",{htmlFor:\"room\",children:\"Room name:\"}),Object(a.jsx)(\"input\",{type:\"text\",id:\"room\",value:n,onChange:c,readOnly:i,required:!0})]}),Object(a.jsx)(\"button\",{type:\"submit\",disabled:i,children:i?\"Connecting\":\"Join\"})]});var h=({participant:e})=>{const t=Object(c.useState)([]),n=Object(l.a)(t,2),r=n[0],i=n[1],o=Object(c.useState)([]),s=Object(l.a)(o,2),d=s[0],j=s[1],b=Object(c.useRef)(),u=Object(c.useRef)(),h=e=>Array.from(e.values()).map((e=>e.track)).filter((e=>null!==e));return Object(c.useEffect)((()=>{i(h(e.videoTracks)),j(h(e.audioTracks));return e.on(\"trackSubscribed\",(e=>{\"video\"===e.kind?i((t=>[...t,e])):\"audio\"===e.kind&&j((t=>[...t,e]))})),e.on(\"trackUnsubscribed\",(e=>{\"video\"===e.kind?i((t=>t.filter((t=>t!==e)))):\"audio\"===e.kind&&j((t=>t.filter((t=>t!==e))))})),()=>{i([]),j([]),e.removeAllListeners()}}),[e]),Object(c.useEffect)((()=>{const e=r[0];if(e)return e.attach(b.current),()=>{e.detach()}}),[r]),Object(c.useEffect)((()=>{const e=d[0];if(e)return e.attach(u.current),()=>{e.detach()}}),[d]),Object(a.jsxs)(\"div\",{className:\"participant\",children:[Object(a.jsx)(\"h3\",{children:e.identity}),Object(a.jsx)(\"video\",{ref:b,autoPlay:!0}),Object(a.jsx)(\"audio\",{ref:u,autoPlay:!0,muted:!0})]})};var O=({roomName:e,room:t,handleLogout:n})=>{const r=Object(c.useState)([]),i=Object(l.a)(r,2),o=i[0],s=i[1];Object(c.useEffect)((()=>{const e=e=>{s((t=>[...t,e]))},n=e=>{s((t=>t.filter((t=>t!==e))))};return t.on(\"participantConnected\",e),t.on(\"participantDisconnected\",n),t.participants.forEach(e),()=>{t.off(\"participantConnected\",e),t.off(\"participantDisconnected\",n)}}),[t]);const d=o.map((e=>Object(a.jsx)(h,{participant:e},e.sid)));return Object(a.jsxs)(\"div\",{className:\"room\",children:[Object(a.jsxs)(\"h2\",{children:[\"Room: \",e]}),Object(a.jsx)(\"button\",{onClick:n,children:\"Log out\"}),Object(a.jsx)(\"div\",{className:\"local-participant\",children:t?Object(a.jsx)(h,{participant:t.localParticipant},t.localParticipant.sid):\"\"}),Object(a.jsx)(\"h3\",{children:\"Remote Participants\"}),Object(a.jsx)(\"div\",{className:\"remote-participants\",children:d})]})};var m=()=>{const e=Object(c.useState)(\"\"),t=Object(l.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(\"\"),o=Object(l.a)(i,2),j=o[0],h=o[1],m=Object(c.useState)(null),p=Object(l.a)(m,2),f=p[0],x=p[1],v=Object(c.useState)(!1),k=Object(l.a)(v,2),g=k[0],w=k[1],y=Object(c.useCallback)((e=>{r(e.target.value)}),[]),C=Object(c.useCallback)((e=>{h(e.target.value)}),[]),S=Object(c.useCallback)(function(){var e=Object(d.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),e.next=4,fetch(\"/video/token\",{method:\"POST\",body:JSON.stringify({identity:n,room:j}),headers:{\"Content-Type\":\"application/json\"}}).then((e=>e.json()));case 4:a=e.sent,b.a.connect(a.token,{name:j}).then((e=>{w(!1),x(e)})).catch((e=>{console.error(e),w(!1)}));case 6:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[j,n]),E=Object(c.useCallback)((()=>{x((e=>(e&&(e.localParticipant.tracks.forEach((e=>{e.track.stop()})),e.disconnect()),null)))}),[]);let N;return Object(c.useEffect)((()=>{if(f){const e=e=>{e.persisted||f&&E()};return window.addEventListener(\"pagehide\",e),window.addEventListener(\"beforeunload\",e),()=>{window.removeEventListener(\"pagehide\",e),window.removeEventListener(\"beforeunload\",e)}}}),[f,E]),N=f?Object(a.jsx)(O,{roomName:j,room:f,handleLogout:E}):Object(a.jsx)(u,{username:n,roomName:j,handleUsernameChange:y,handleRoomNameChange:C,handleSubmit:S,connecting:g}),N};var p=()=>Object(a.jsxs)(\"div\",{className:\"app\",children:[Object(a.jsx)(\"header\",{children:Object(a.jsx)(\"h1\",{children:\"StudyBuddies\"})}),Object(a.jsx)(\"main\",{children:Object(a.jsx)(m,{})}),Object(a.jsx)(\"footer\",{children:Object(a.jsxs)(\"p\",{children:[\"Made with\",\" \",Object(a.jsx)(\"span\",{role:\"img\",\"aria-label\":\"React\",children:\"\\u269b\\ufe0f\"}),\" \",\"by \",Object(a.jsx)(\"a\",{href:\"https://twitter.com/philnash\",children:\"philnash\"})]})})]});Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(a.jsx)(p,{}),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))},81:function(e,t,n){},82:function(e,t,n){}},[[185,1,2]]]);","name":"static/js/main.a8a62cfc.chunk.js","map":{"version":3,"sources":["static/js/main.a8a62cfc.chunk.js"],"names":["this","push","185","module","__webpack_exports__","__webpack_require__","r","jsx_runtime","react","react_dom","react_dom_default","n","regenerator","regenerator_default","asyncToGenerator","slicedToArray","es5","es5_default","src_Lobby","username","handleUsernameChange","roomName","handleRoomNameChange","handleSubmit","connecting","Object","onSubmit","children","htmlFor","type","id","value","onChange","readOnly","required","disabled","src_Participant","participant","_useState","_useState2","videoTracks","setVideoTracks","_useState3","_useState4","audioTracks","setAudioTracks","videoRef","audioRef","trackpubsToTracks","trackMap","Array","from","values","map","publication","track","filter","on","kind","v","a","removeAllListeners","videoTrack","attach","current","detach","audioTrack","className","identity","ref","autoPlay","muted","src_Room","room","handleLogout","participants","setParticipants","participantConnected","prevParticipants","participantDisconnected","p","forEach","off","remoteParticipants","sid","onClick","localParticipant","src_VideoChat","setUsername","setRoomName","_useState5","_useState6","setRoom","_useState7","_useState8","setConnecting","event","target","_ref","mark","_callee","data","wrap","_context","prev","next","preventDefault","fetch","method","body","JSON","stringify","headers","Content-Type","then","res","json","sent","connect","token","name","catch","err","console","error","stop","_x","apply","arguments","prevRoom","tracks","trackPub","disconnect","render","tidyUp","persisted","window","addEventListener","removeEventListener","src_App","role","aria-label","href","Boolean","location","hostname","match","document","getElementById","navigator","serviceWorker","ready","registration","unregister","81","exports","82"],"mappings":"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"},"input":"(this[\"webpackJsonpreact-express-starter\"] = this[\"webpackJsonpreact-express-starter\"] || []).push([[0],{\n\n/***/ 185:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(73);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(81);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(82);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(27);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(74);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/twilio-video/es5/index.js\nvar es5 = __webpack_require__(75);\nvar es5_default = /*#__PURE__*/__webpack_require__.n(es5);\n\n// CONCATENATED MODULE: ./src/Lobby.js\nconst Lobby=({username,handleUsernameChange,roomName,handleRoomNameChange,handleSubmit,connecting})=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Enter a room\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{htmlFor:\"name\",children:\"Name:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",id:\"field\",value:username,onChange:handleUsernameChange,readOnly:connecting,required:true})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{htmlFor:\"room\",children:\"Room name:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",id:\"room\",value:roomName,onChange:handleRoomNameChange,readOnly:connecting,required:true})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"submit\",disabled:connecting,children:connecting?\"Connecting\":\"Join\"})]});};/* harmony default export */ var src_Lobby = (Lobby);\n// CONCATENATED MODULE: ./src/Participant.js\nconst Participant=({participant})=>{const _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),videoTracks=_useState2[0],setVideoTracks=_useState2[1];const _useState3=Object(react[\"useState\"])([]),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),audioTracks=_useState4[0],setAudioTracks=_useState4[1];const videoRef=Object(react[\"useRef\"])();const audioRef=Object(react[\"useRef\"])();const trackpubsToTracks=trackMap=>Array.from(trackMap.values()).map(publication=>publication.track).filter(track=>track!==null);Object(react[\"useEffect\"])(()=>{setVideoTracks(trackpubsToTracks(participant.videoTracks));setAudioTracks(trackpubsToTracks(participant.audioTracks));const trackSubscribed=track=>{if(track.kind===\"video\"){setVideoTracks(videoTracks=>[...videoTracks,track]);}else if(track.kind===\"audio\"){setAudioTracks(audioTracks=>[...audioTracks,track]);}};const trackUnsubscribed=track=>{if(track.kind===\"video\"){setVideoTracks(videoTracks=>videoTracks.filter(v=>v!==track));}else if(track.kind===\"audio\"){setAudioTracks(audioTracks=>audioTracks.filter(a=>a!==track));}};participant.on(\"trackSubscribed\",trackSubscribed);participant.on(\"trackUnsubscribed\",trackUnsubscribed);return()=>{setVideoTracks([]);setAudioTracks([]);participant.removeAllListeners();};},[participant]);Object(react[\"useEffect\"])(()=>{const videoTrack=videoTracks[0];if(videoTrack){videoTrack.attach(videoRef.current);return()=>{videoTrack.detach();};}},[videoTracks]);Object(react[\"useEffect\"])(()=>{const audioTrack=audioTracks[0];if(audioTrack){audioTrack.attach(audioRef.current);return()=>{audioTrack.detach();};}},[audioTracks]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"participant\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:participant.identity}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"video\",{ref:videoRef,autoPlay:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"audio\",{ref:audioRef,autoPlay:true,muted:true})]});};/* harmony default export */ var src_Participant = (Participant);\n// CONCATENATED MODULE: ./src/Room.js\nconst Room=({roomName,room,handleLogout})=>{const _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),participants=_useState2[0],setParticipants=_useState2[1];Object(react[\"useEffect\"])(()=>{const participantConnected=participant=>{setParticipants(prevParticipants=>[...prevParticipants,participant]);};const participantDisconnected=participant=>{setParticipants(prevParticipants=>prevParticipants.filter(p=>p!==participant));};room.on(\"participantConnected\",participantConnected);room.on(\"participantDisconnected\",participantDisconnected);room.participants.forEach(participantConnected);return()=>{room.off(\"participantConnected\",participantConnected);room.off(\"participantDisconnected\",participantDisconnected);};},[room]);const remoteParticipants=participants.map(participant=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_Participant,{participant:participant},participant.sid));return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"room\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h2\",{children:[\"Room: \",roomName]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:handleLogout,children:\"Log out\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"local-participant\",children:room?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_Participant,{participant:room.localParticipant},room.localParticipant.sid):\"\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:\"Remote Participants\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"remote-participants\",children:remoteParticipants})]});};/* harmony default export */ var src_Room = (Room);\n// CONCATENATED MODULE: ./src/VideoChat.js\nconst VideoChat=()=>{const _useState=Object(react[\"useState\"])(\"\"),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),username=_useState2[0],setUsername=_useState2[1];const _useState3=Object(react[\"useState\"])(\"\"),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),roomName=_useState4[0],setRoomName=_useState4[1];const _useState5=Object(react[\"useState\"])(null),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),room=_useState6[0],setRoom=_useState6[1];const _useState7=Object(react[\"useState\"])(false),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),connecting=_useState8[0],setConnecting=_useState8[1];const handleUsernameChange=Object(react[\"useCallback\"])(event=>{setUsername(event.target.value);},[]);const handleRoomNameChange=Object(react[\"useCallback\"])(event=>{setRoomName(event.target.value);},[]);const handleSubmit=Object(react[\"useCallback\"])(/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(event){var data;return regenerator_default.a.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();setConnecting(true);_context.next=4;return fetch(\"/video/token\",{method:\"POST\",body:JSON.stringify({identity:username,room:roomName}),headers:{\"Content-Type\":\"application/json\"}}).then(res=>res.json());case 4:data=_context.sent;es5_default.a.connect(data.token,{name:roomName}).then(room=>{setConnecting(false);setRoom(room);}).catch(err=>{console.error(err);setConnecting(false);});case 6:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[roomName,username]);const handleLogout=Object(react[\"useCallback\"])(()=>{setRoom(prevRoom=>{if(prevRoom){prevRoom.localParticipant.tracks.forEach(trackPub=>{trackPub.track.stop();});prevRoom.disconnect();}return null;});},[]);Object(react[\"useEffect\"])(()=>{if(room){const tidyUp=event=>{if(event.persisted){return;}if(room){handleLogout();}};window.addEventListener(\"pagehide\",tidyUp);window.addEventListener(\"beforeunload\",tidyUp);return()=>{window.removeEventListener(\"pagehide\",tidyUp);window.removeEventListener(\"beforeunload\",tidyUp);};}},[room,handleLogout]);let render;if(room){render=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_Room,{roomName:roomName,room:room,handleLogout:handleLogout});}else{render=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_Lobby,{username:username,roomName:roomName,handleUsernameChange:handleUsernameChange,handleRoomNameChange:handleRoomNameChange,handleSubmit:handleSubmit,connecting:connecting});}return render;};/* harmony default export */ var src_VideoChat = (VideoChat);\n// CONCATENATED MODULE: ./src/App.js\nconst App_App=()=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"app\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"header\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"StudyBuddies\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"main\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_VideoChat,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"footer\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Made with\",' ',/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{role:\"img\",\"aria-label\":\"React\",children:\"\\u269B\\uFE0F\"}),' ',\"by \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:\"https://twitter.com/philnash\",children:\"philnash\"})]})})]});};/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/serviceWorker.js\n// In production, we register a service worker to serve assets from local cache.\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\nconst isLocalhost=Boolean(window.location.hostname==='localhost'||// [::1] is the IPv6 localhost address.\nwindow.location.hostname==='[::1]'||// 127.0.0.1/8 is considered localhost for IPv4.\nwindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function register(config){if( true&&'serviceWorker'in navigator){// The URL constructor is available in all browsers that support SW.\nconst publicUrl=new URL(\"\",window.location);if(publicUrl.origin!==window.location.origin){// Our service worker won't work if PUBLIC_URL is on a different origin\n// from what our page is served on. This might happen if a CDN is used to\n// serve assets; see https://github.com/facebook/create-react-app/issues/2374\nreturn;}window.addEventListener('load',()=>{const swUrl=\"\".concat(\"\",\"/service-worker.js\");if(isLocalhost){// This is running on localhost. Let's check if a service worker still exists or not.\ncheckValidServiceWorker(swUrl,config);// Add some additional logging to localhost, pointing developers to the\n// service worker/PWA documentation.\nnavigator.serviceWorker.ready.then(()=>{console.log('This web app is being served cache-first by a service '+'worker. To learn more, visit https://goo.gl/SC7cgQ');});}else{// Is not local host. Just register service worker\nregisterValidSW(swUrl,config);}});}}function registerValidSW(swUrl,config){navigator.serviceWorker.register(swUrl).then(registration=>{registration.onupdatefound=()=>{const installingWorker=registration.installing;installingWorker.onstatechange=()=>{if(installingWorker.state==='installed'){if(navigator.serviceWorker.controller){// At this point, the old content will have been purged and\n// the fresh content will have been added to the cache.\n// It's the perfect time to display a \"New content is\n// available; please refresh.\" message in your web app.\nconsole.log('New content is available; please refresh.');// Execute callback\nif(config.onUpdate){config.onUpdate(registration);}}else{// At this point, everything has been precached.\n// It's the perfect time to display a\n// \"Content is cached for offline use.\" message.\nconsole.log('Content is cached for offline use.');// Execute callback\nif(config.onSuccess){config.onSuccess(registration);}}}};};}).catch(error=>{console.error('Error during service worker registration:',error);});}function checkValidServiceWorker(swUrl,config){// Check if the service worker can be found. If it can't reload the page.\nfetch(swUrl).then(response=>{// Ensure service worker exists, and that we really are getting a JS file.\nif(response.status===404||response.headers.get('content-type').indexOf('javascript')===-1){// No service worker found. Probably a different app. Reload the page.\nnavigator.serviceWorker.ready.then(registration=>{registration.unregister().then(()=>{window.location.reload();});});}else{// Service worker found. Proceed as normal.\nregisterValidSW(swUrl,config);}}).catch(()=>{console.log('No internet connection found. App is running in offline mode.');});}function unregister(){if('serviceWorker'in navigator){navigator.serviceWorker.ready.then(registration=>{registration.unregister();});}}\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{}),document.getElementById('root'));// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nunregister();\n\n/***/ }),\n\n/***/ 81:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 82:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ })\n\n},[[185,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:/Users/Chris/Desktop/hackathon/studdybuddies/studyBuddiesProject/src/Lobby.js","C:/Users/Chris/Desktop/hackathon/studdybuddies/studyBuddiesProject/src/Participant.js","C:/Users/Chris/Desktop/hackathon/studdybuddies/studyBuddiesProject/src/Room.js","C:/Users/Chris/Desktop/hackathon/studdybuddies/studyBuddiesProject/src/VideoChat.js","C:/Users/Chris/Desktop/hackathon/studdybuddies/studyBuddiesProject/src/App.js","C:/Users/Chris/Desktop/hackathon/studdybuddies/studyBuddiesProject/src/serviceWorker.js","C:/Users/Chris/Desktop/hackathon/studdybuddies/studyBuddiesProject/src/index.js","C:\\Users\\Chris\\Desktop\\hackathon\\studdybuddies\\studyBuddiesProject\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Chris\\Desktop\\hackathon\\studdybuddies\\studyBuddiesProject\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Chris\\Desktop\\hackathon\\studdybuddies\\studyBuddiesProject\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Chris\\Desktop\\hackathon\\studdybuddies\\studyBuddiesProject\\src\\index.css","C:\\Users\\Chris\\Desktop\\hackathon\\studdybuddies\\studyBuddiesProject\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\Chris\\Desktop\\hackathon\\studdybuddies\\studyBuddiesProject\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\Chris\\Desktop\\hackathon\\studdybuddies\\studyBuddiesProject\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\Chris\\Desktop\\hackathon\\studdybuddies\\studyBuddiesProject\\src\\App.css"],"names":["Lobby","username","handleUsernameChange","roomName","handleRoomNameChange","handleSubmit","connecting","Participant","participant","useState","videoTracks","setVideoTracks","audioTracks","setAudioTracks","videoRef","useRef","audioRef","trackpubsToTracks","trackMap","Array","from","values","map","publication","track","filter","useEffect","trackSubscribed","kind","trackUnsubscribed","v","a","on","removeAllListeners","videoTrack","attach","current","detach","audioTrack","identity","Room","room","handleLogout","participants","setParticipants","participantConnected","prevParticipants","participantDisconnected","p","forEach","off","remoteParticipants","sid","localParticipant","VideoChat","setUsername","setRoomName","setRoom","setConnecting","useCallback","event","target","value","preventDefault","fetch","method","body","JSON","stringify","headers","then","res","json","data","Video","connect","token","name","catch","err","console","error","prevRoom","tracks","trackPub","stop","disconnect","tidyUp","persisted","window","addEventListener","removeEventListener","render","App","isLocalhost","Boolean","location","hostname","match","register","config","process","navigator","publicUrl","URL","origin","swUrl","checkValidServiceWorker","serviceWorker","ready","log","registerValidSW","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","response","status","get","indexOf","unregister","reload","ReactDOM","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["import React from \"react\";\r\n\r\nconst Lobby = ({\r\n  username,\r\n  handleUsernameChange,\r\n  roomName,\r\n  handleRoomNameChange,\r\n  handleSubmit,\r\n  connecting,\r\n}) => {\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <h2>Enter a room</h2>\r\n      <div>\r\n        <label htmlFor=\"name\">Name:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"field\"\r\n          value={username}\r\n          onChange={handleUsernameChange}\r\n          readOnly={connecting}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"room\">Room name:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"room\"\r\n          value={roomName}\r\n          onChange={handleRoomNameChange}\r\n          readOnly={connecting}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <button type=\"submit\" disabled={connecting}>\r\n        {connecting ? \"Connecting\" : \"Join\"}\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Lobby;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nconst Participant = ({ participant }) => {\r\n  const [videoTracks, setVideoTracks] = useState([]);\r\n  const [audioTracks, setAudioTracks] = useState([]);\r\n\r\n  const videoRef = useRef();\r\n  const audioRef = useRef();\r\n\r\n  const trackpubsToTracks = (trackMap) =>\r\n    Array.from(trackMap.values())\r\n      .map((publication) => publication.track)\r\n      .filter((track) => track !== null);\r\n\r\n  useEffect(() => {\r\n    setVideoTracks(trackpubsToTracks(participant.videoTracks));\r\n    setAudioTracks(trackpubsToTracks(participant.audioTracks));\r\n\r\n    const trackSubscribed = (track) => {\r\n      if (track.kind === \"video\") {\r\n        setVideoTracks((videoTracks) => [...videoTracks, track]);\r\n      } else if (track.kind === \"audio\") {\r\n        setAudioTracks((audioTracks) => [...audioTracks, track]);\r\n      }\r\n    };\r\n\r\n    const trackUnsubscribed = (track) => {\r\n      if (track.kind === \"video\") {\r\n        setVideoTracks((videoTracks) => videoTracks.filter((v) => v !== track));\r\n      } else if (track.kind === \"audio\") {\r\n        setAudioTracks((audioTracks) => audioTracks.filter((a) => a !== track));\r\n      }\r\n    };\r\n\r\n    participant.on(\"trackSubscribed\", trackSubscribed);\r\n    participant.on(\"trackUnsubscribed\", trackUnsubscribed);\r\n\r\n    return () => {\r\n      setVideoTracks([]);\r\n      setAudioTracks([]);\r\n      participant.removeAllListeners();\r\n    };\r\n  }, [participant]);\r\n\r\n  useEffect(() => {\r\n    const videoTrack = videoTracks[0];\r\n    if (videoTrack) {\r\n      videoTrack.attach(videoRef.current);\r\n      return () => {\r\n        videoTrack.detach();\r\n      };\r\n    }\r\n  }, [videoTracks]);\r\n\r\n  useEffect(() => {\r\n    const audioTrack = audioTracks[0];\r\n    if (audioTrack) {\r\n      audioTrack.attach(audioRef.current);\r\n      return () => {\r\n        audioTrack.detach();\r\n      };\r\n    }\r\n  }, [audioTracks]);\r\n\r\n  return (\r\n    <div className=\"participant\">\r\n      <h3>{participant.identity}</h3>\r\n      <video ref={videoRef} autoPlay={true} />\r\n      <audio ref={audioRef} autoPlay={true} muted={true} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Participant;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Participant from \"./Participant\";\r\n\r\nconst Room = ({ roomName, room, handleLogout }) => {\r\n  const [participants, setParticipants] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const participantConnected = (participant) => {\r\n      setParticipants((prevParticipants) => [...prevParticipants, participant]);\r\n    };\r\n\r\n    const participantDisconnected = (participant) => {\r\n      setParticipants((prevParticipants) =>\r\n        prevParticipants.filter((p) => p !== participant)\r\n      );\r\n    };\r\n\r\n    room.on(\"participantConnected\", participantConnected);\r\n    room.on(\"participantDisconnected\", participantDisconnected);\r\n    room.participants.forEach(participantConnected);\r\n    return () => {\r\n      room.off(\"participantConnected\", participantConnected);\r\n      room.off(\"participantDisconnected\", participantDisconnected);\r\n    };\r\n  }, [room]);\r\n\r\n  const remoteParticipants = participants.map((participant) => (\r\n    <Participant key={participant.sid} participant={participant} />\r\n  ));\r\n\r\n  return (\r\n    <div className=\"room\">\r\n      <h2>Room: {roomName}</h2>\r\n      <button onClick={handleLogout}>Log out</button>\r\n      <div className=\"local-participant\">\r\n        {room ? (\r\n          <Participant\r\n            key={room.localParticipant.sid}\r\n            participant={room.localParticipant}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n      <h3>Remote Participants</h3>\r\n      <div className=\"remote-participants\">{remoteParticipants}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Room;\r\n","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport Video from \"twilio-video\";\r\nimport Lobby from \"./Lobby\";\r\nimport Room from \"./Room\";\r\n\r\nconst VideoChat = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [room, setRoom] = useState(null);\r\n  const [connecting, setConnecting] = useState(false);\r\n\r\n  const handleUsernameChange = useCallback((event) => {\r\n    setUsername(event.target.value);\r\n  }, []);\r\n\r\n  const handleRoomNameChange = useCallback((event) => {\r\n    setRoomName(event.target.value);\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(\r\n    async (event) => {\r\n      event.preventDefault();\r\n      setConnecting(true);\r\n      const data = await fetch(\"/video/token\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          identity: username,\r\n          room: roomName,\r\n        }),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }).then((res) => res.json());\r\n      Video.connect(data.token, {\r\n        name: roomName,\r\n      })\r\n        .then((room) => {\r\n          setConnecting(false);\r\n          setRoom(room);\r\n        })\r\n        .catch((err) => {\r\n          console.error(err);\r\n          setConnecting(false);\r\n        });\r\n    },\r\n    [roomName, username]\r\n  );\r\n\r\n  const handleLogout = useCallback(() => {\r\n    setRoom((prevRoom) => {\r\n      if (prevRoom) {\r\n        prevRoom.localParticipant.tracks.forEach((trackPub) => {\r\n          trackPub.track.stop();\r\n        });\r\n        prevRoom.disconnect();\r\n      }\r\n      return null;\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (room) {\r\n      const tidyUp = (event) => {\r\n        if (event.persisted) {\r\n          return;\r\n        }\r\n        if (room) {\r\n          handleLogout();\r\n        }\r\n      };\r\n      window.addEventListener(\"pagehide\", tidyUp);\r\n      window.addEventListener(\"beforeunload\", tidyUp);\r\n      return () => {\r\n        window.removeEventListener(\"pagehide\", tidyUp);\r\n        window.removeEventListener(\"beforeunload\", tidyUp);\r\n      };\r\n    }\r\n  }, [room, handleLogout]);\r\n\r\n  let render;\r\n  if (room) {\r\n    render = (\r\n      <Room roomName={roomName} room={room} handleLogout={handleLogout} />\r\n    );\r\n  } else {\r\n    render = (\r\n      <Lobby\r\n        username={username}\r\n        roomName={roomName}\r\n        handleUsernameChange={handleUsernameChange}\r\n        handleRoomNameChange={handleRoomNameChange}\r\n        handleSubmit={handleSubmit}\r\n        connecting={connecting}\r\n      />\r\n    );\r\n  }\r\n  return render;\r\n};\r\n\r\nexport default VideoChat;\r\n","import React from 'react';\r\nimport './App.css';\r\nimport VideoChat from './VideoChat';\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className=\"app\">\r\n      <header>\r\n        <h1>StudyBuddies</h1>\r\n      </header>\r\n      <main>\r\n        <VideoChat />\r\n      </main>\r\n      <footer>\r\n        <p>\r\n          Made with{' '}\r\n          <span role=\"img\" aria-label=\"React\">\r\n            ⚛️\r\n          </span>{' '}\r\n          by <a href=\"https://twitter.com/philnash\">philnash</a>\r\n        </p>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n\r\n              // Execute callback\r\n              if (config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin"]}}