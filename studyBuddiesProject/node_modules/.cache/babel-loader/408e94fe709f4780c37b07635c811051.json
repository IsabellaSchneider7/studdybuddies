{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/Chris/Desktop/hackathon/studdybuddies/studyBuddiesProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";const Participant=({participant})=>{const _useState=useState([]),_useState2=_slicedToArray(_useState,2),videoTracks=_useState2[0],setVideoTracks=_useState2[1];const _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),audioTracks=_useState4[0],setAudioTracks=_useState4[1];const videoRef=useRef();const audioRef=useRef();const trackpubsToTracks=trackMap=>Array.from(trackMap.values()).map(publication=>publication.track).filter(track=>track!==null);useEffect(()=>{setVideoTracks(trackpubsToTracks(participant.videoTracks));setAudioTracks(trackpubsToTracks(participant.audioTracks));const trackSubscribed=track=>{if(track.kind===\"video\"){setVideoTracks(videoTracks=>[...videoTracks,track]);}else if(track.kind===\"audio\"){setAudioTracks(audioTracks=>[...audioTracks,track]);}};const trackUnsubscribed=track=>{if(track.kind===\"video\"){setVideoTracks(videoTracks=>videoTracks.filter(v=>v!==track));}else if(track.kind===\"audio\"){setAudioTracks(audioTracks=>audioTracks.filter(a=>a!==track));}};participant.on(\"trackSubscribed\",trackSubscribed);participant.on(\"trackUnsubscribed\",trackUnsubscribed);return()=>{setVideoTracks([]);setAudioTracks([]);participant.removeAllListeners();};},[participant]);useEffect(()=>{const videoTrack=videoTracks[0];if(videoTrack){videoTrack.attach(videoRef.current);return()=>{videoTrack.detach();};}},[videoTracks]);useEffect(()=>{const audioTrack=audioTracks[0];if(audioTrack){audioTrack.attach(audioRef.current);return()=>{audioTrack.detach();};}},[audioTracks]);return/*#__PURE__*/_jsxs(\"div\",{className:\"participant\",children:[/*#__PURE__*/_jsx(\"h3\",{children:participant.identity}),/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true}),/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,autoPlay:true,muted:true})]});};export default Participant;","map":{"version":3,"sources":["C:/Users/Chris/Desktop/hackathon/studdybuddies/studyBuddiesProject/src/Participant.js"],"names":["React","useState","useEffect","useRef","Participant","participant","videoTracks","setVideoTracks","audioTracks","setAudioTracks","videoRef","audioRef","trackpubsToTracks","trackMap","Array","from","values","map","publication","track","filter","trackSubscribed","kind","trackUnsubscribed","v","a","on","removeAllListeners","videoTrack","attach","current","detach","audioTrack","identity"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nconst Participant = ({ participant }) => {\r\n  const [videoTracks, setVideoTracks] = useState([]);\r\n  const [audioTracks, setAudioTracks] = useState([]);\r\n\r\n  const videoRef = useRef();\r\n  const audioRef = useRef();\r\n\r\n  const trackpubsToTracks = (trackMap) =>\r\n    Array.from(trackMap.values())\r\n      .map((publication) => publication.track)\r\n      .filter((track) => track !== null);\r\n\r\n  useEffect(() => {\r\n    setVideoTracks(trackpubsToTracks(participant.videoTracks));\r\n    setAudioTracks(trackpubsToTracks(participant.audioTracks));\r\n\r\n    const trackSubscribed = (track) => {\r\n      if (track.kind === \"video\") {\r\n        setVideoTracks((videoTracks) => [...videoTracks, track]);\r\n      } else if (track.kind === \"audio\") {\r\n        setAudioTracks((audioTracks) => [...audioTracks, track]);\r\n      }\r\n    };\r\n\r\n    const trackUnsubscribed = (track) => {\r\n      if (track.kind === \"video\") {\r\n        setVideoTracks((videoTracks) => videoTracks.filter((v) => v !== track));\r\n      } else if (track.kind === \"audio\") {\r\n        setAudioTracks((audioTracks) => audioTracks.filter((a) => a !== track));\r\n      }\r\n    };\r\n\r\n    participant.on(\"trackSubscribed\", trackSubscribed);\r\n    participant.on(\"trackUnsubscribed\", trackUnsubscribed);\r\n\r\n    return () => {\r\n      setVideoTracks([]);\r\n      setAudioTracks([]);\r\n      participant.removeAllListeners();\r\n    };\r\n  }, [participant]);\r\n\r\n  useEffect(() => {\r\n    const videoTrack = videoTracks[0];\r\n    if (videoTrack) {\r\n      videoTrack.attach(videoRef.current);\r\n      return () => {\r\n        videoTrack.detach();\r\n      };\r\n    }\r\n  }, [videoTracks]);\r\n\r\n  useEffect(() => {\r\n    const audioTrack = audioTracks[0];\r\n    if (audioTrack) {\r\n      audioTrack.attach(audioRef.current);\r\n      return () => {\r\n        audioTrack.detach();\r\n      };\r\n    }\r\n  }, [audioTracks]);\r\n\r\n  return (\r\n    <div className=\"participant\">\r\n      <h3>{participant.identity}</h3>\r\n      <video ref={videoRef} autoPlay={true} />\r\n      <audio ref={audioRef} autoPlay={true} muted={true} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Participant;\r\n"]},"metadata":{},"sourceType":"module"}