(this["webpackJsonpreact-express-starter"]=this["webpackJsonpreact-express-starter"]||[]).push([[0],{198:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(2),r=n.n(a),o=n(85),s=n.n(o),i=(n(94),n(6)),d=n(37),j=n.n(d),l=n(86),b=n(87),u=n.n(b);var h=({username:e,handleUsernameChange:t,roomName:n,handleRoomNameChange:a,handleSubmit:r,connecting:o})=>Object(c.jsxs)("form",{onSubmit:r,children:[Object(c.jsx)("h2",{children:"Enter a room"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(c.jsx)("input",{type:"text",id:"field",value:e,onChange:t,readOnly:o,required:!0})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"room",children:"Room name:"}),Object(c.jsx)("input",{type:"text",id:"room",value:n,onChange:a,readOnly:o,required:!0})]}),Object(c.jsx)("button",{type:"submit",disabled:o,children:o?"Connecting":"Join"})," \xa0\xa0\xa0\xa0\xa0\xa0",Object(c.jsx)("button",{children:" SignOut"}),Object(c.jsx)("h1",{children:" "})]});var O=({participant:e})=>{const t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)([]),d=Object(i.a)(s,2),j=d[0],l=d[1],b=Object(a.useRef)(),u=Object(a.useRef)(),h=e=>Array.from(e.values()).map((e=>e.track)).filter((e=>null!==e));return Object(a.useEffect)((()=>{o(h(e.videoTracks)),l(h(e.audioTracks));return e.on("trackSubscribed",(e=>{"video"===e.kind?o((t=>[...t,e])):"audio"===e.kind&&l((t=>[...t,e]))})),e.on("trackUnsubscribed",(e=>{"video"===e.kind?o((t=>t.filter((t=>t!==e)))):"audio"===e.kind&&l((t=>t.filter((t=>t!==e))))})),()=>{o([]),l([]),e.removeAllListeners()}}),[e]),Object(a.useEffect)((()=>{const e=r[0];if(e)return e.attach(b.current),()=>{e.detach()}}),[r]),Object(a.useEffect)((()=>{const e=j[0];if(e)return e.attach(u.current),()=>{e.detach()}}),[j]),Object(c.jsxs)("div",{className:"participant",children:[Object(c.jsx)("h3",{children:e.identity}),Object(c.jsx)("video",{ref:b,autoPlay:!0}),Object(c.jsx)("audio",{ref:u,autoPlay:!0,muted:!0})]})},p=(n(84),1);var m=({hoursMinSecs:e})=>{const t=e.hours,n=void 0===t?0:t,a=e.minutes,o=void 0===a?0:a,s=e.seconds,d=void 0===s?60:s,j=r.a.useState([n,o,d]),l=Object(i.a)(j,2),b=Object(i.a)(l[0],3),u=b[0],h=b[1],O=b[2],m=l[1],x=r.a.useState("#CA5130"),f=Object(i.a)(x,2),v=f[0],g=f[1],S=r.a.useState("STUDY TIME"),k=Object(i.a)(S,2),y=k[0],w=k[1],C=()=>{p%2===1?(m([parseInt("0"),parseInt("0"),parseInt("5")]),g("#CA5130"),w("STUDY TIME")):(m([parseInt("0"),parseInt("0"),parseInt("20")]),g("#27ca6e"),w("BREAK TIME"))};return r.a.useEffect((()=>{const e=setInterval((()=>{0===u&&0===h&&0===O?(p++,console.log("count",p),C()):m(0===h&&0===O?[u-1,59,59]:0===O?[u,h-1,59]:[u,h,O-1])}),1e3);return()=>clearInterval(e)})),Object(c.jsxs)("div",{style:{backgroundColor:v},children:[Object(c.jsx)("h1",{children:y}),Object(c.jsx)("p",{children:"".concat(u.toString().padStart(2,"0"),":").concat(h.toString().padStart(2,"0"),":").concat(O.toString().padStart(2,"0"))})]})},x=n(20);var f=function(){const e=Object(x.a)("/drumSound1.wav"),t=Object(i.a)(e,1)[0],n=Object(x.a)("/saxSound.wav"),a=Object(i.a)(n,1)[0],r=Object(x.a)("/trumpetSound.wav"),o=Object(i.a)(r,1)[0],s=Object(x.a)("/guitarSound.wav"),d=Object(i.a)(s,1)[0],j=Object(x.a)("/alert.mp3"),l=Object(i.a)(j,1)[0];return Object(c.jsxs)("div",{className:"flex",children:[Object(c.jsx)("div",{className:"flex playButton",children:Object(c.jsx)("button",{onClick:function(){d()},children:"1"})}),Object(c.jsx)("div",{className:"flex playButton",children:Object(c.jsx)("button",{onClick:function(){t()},children:"2"})}),Object(c.jsx)("div",{className:"flex playButton",children:Object(c.jsx)("button",{onClick:function(){a()},children:"3"})}),Object(c.jsx)("div",{className:"flex playButton",children:Object(c.jsx)("button",{onClick:function(){o()},children:"4"})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){l(),alert("Get back to work!")},children:"Flag someone"})})]})};var v=({roomName:e,room:t,handleLogout:n})=>{const r=Object(a.useState)([]),o=Object(i.a)(r,2),s=o[0],d=o[1];Object(a.useEffect)((()=>{const e=e=>{d((t=>[...t,e]))},n=e=>{d((t=>t.filter((t=>t!==e))))};return t.on("participantConnected",e),t.on("participantDisconnected",n),t.participants.forEach(e),()=>{t.off("participantConnected",e),t.off("participantDisconnected",n)}}),[t]);const j=s.map((e=>Object(c.jsx)(O,{participant:e},e.sid)));return Object(c.jsxs)("div",{className:"room",children:[Object(c.jsx)("header",{children:Object(c.jsx)(m,{hoursMinSecs:{hours:0,minutes:0,seconds:5}})}),Object(c.jsxs)("h2",{children:["Room: ",e]}),Object(c.jsx)("div",{className:"logoutButton",children:Object(c.jsx)("button",{onClick:n,children:"Log out"})}),Object(c.jsx)(f,{}),Object(c.jsx)("div",{className:"local-participant",children:t?Object(c.jsx)(O,{participant:t.localParticipant},t.localParticipant.sid):""}),Object(c.jsx)("h3",{children:"Remote Participants"}),Object(c.jsx)("div",{className:"remote-participants",children:j})]})};var g=()=>{const e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),s=Object(i.a)(o,2),d=s[0],b=s[1],O=Object(a.useState)(null),p=Object(i.a)(O,2),m=p[0],x=p[1],f=Object(a.useState)(!1),g=Object(i.a)(f,2),S=g[0],k=g[1],y=Object(a.useCallback)((e=>{r(e.target.value)}),[]),w=Object(a.useCallback)((e=>{b(e.target.value)}),[]),C=Object(a.useCallback)(function(){var e=Object(l.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),k(!0),e.next=4,fetch("/video/token",{method:"POST",body:JSON.stringify({identity:n,room:d}),headers:{"Content-Type":"application/json"}}).then((e=>e.json()));case 4:c=e.sent,u.a.connect(c.token,{name:d}).then((e=>{k(!1),x(e)})).catch((e=>{console.error(e),k(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,n]),N=Object(a.useCallback)((()=>{x((e=>(e&&(e.localParticipant.tracks.forEach((e=>{e.track.stop()})),e.disconnect()),null)))}),[]);let I;return Object(a.useEffect)((()=>{if(m){const e=e=>{e.persisted||m&&N()};return window.addEventListener("pagehide",e),window.addEventListener("beforeunload",e),()=>{window.removeEventListener("pagehide",e),window.removeEventListener("beforeunload",e)}}}),[m,N]),I=m?Object(c.jsx)("div",{children:Object(c.jsx)(v,{roomName:d,room:m,handleLogout:N})}):Object(c.jsx)(h,{username:n,roomName:d,handleUsernameChange:y,handleRoomNameChange:w,handleSubmit:C,connecting:S}),I},S=n(26),k=(n(199),n(196),n(88));S.a.initializeApp({apiKey:"AIzaSyAhQPXLX-dGfBbu6LwK1NqWX7dDGovnP1g",authDomain:"studybuddies-bdf0b.firebaseapp.com",projectId:"studybuddies-bdf0b",storageBucket:"studybuddies-bdf0b.appspot.com",messagingSenderId:"819278302220",appId:"1:819278302220:web:be3a6f8be430961cf2b229",measurementId:"G-GR6M89H55F"});const y=S.a.auth();function w(){return Object(c.jsx)("button",{onClick:()=>{const e=new S.a.auth.GoogleAuthProvider;y.signInWithPopup(e)},children:"Sign in with Google"})}var C=()=>{const e=Object(k.a)(y),t=Object(i.a)(e,1)[0];return Object(c.jsxs)("div",{className:"app",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h1",{children:"StuddyBuddies"})}),Object(c.jsx)("section",{children:t?Object(c.jsx)(g,{}):Object(c.jsx)(w,{})}),Object(c.jsx)("footer",{children:Object(c.jsx)("p",{children:"Made by Ria, Chris, Nick and Isabella"})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(c.jsx)(C,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))},84:function(e,t,n){},94:function(e,t,n){}},[[198,1,2]]]);
//# sourceMappingURL=main.06b4660e.chunk.js.map